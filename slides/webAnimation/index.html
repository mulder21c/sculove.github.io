<!doctype html>
<html lang="ko">
	<head>
		<meta charset="utf-8">
		<title>HTML5 Web Animation</title>

		<meta name="description" content="animation">
		<meta name="author" content="sculove. 손찬욱">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="../../revealjs/css/reveal.css">
		<link rel="stylesheet" href="../../revealjs/css/theme/moon.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="../../revealjs/lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = '../../revealjs/css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-37362821-4', 'auto');
		  ga('send', 'pageview');

		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
		<script src="../../revealjs/lib/js/jquery-1.11.3.js"></script>
		<style>
.strong {
	color: #FF5E99 !important;
}
.semi-strong {
	color : #268bd2 !important;
}
.code > button:hover {
	opacity: 1;
}

ul,ol {
	margin : 0px !important;
}

li {
	margin-top : 10px !important;
	font-size : 0.8em !important;
}

blockquote {
	width : 95% !important;
	border-radius: 5px;
}
		</style>
		<link rel="stylesheet" href="live-code/example.css">
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-transition="linear" data-background-transition="slide">
					<h2>HTML5 Web Animation</h2>
					<br>
					<p>
						<small>Created by <a href="http://sculove.pe.kr">손찬욱</a> / <a href="https://www.facebook.com/chanuk.son">chanuk.son</a></small>
					</p>
				</section>
				<section>
					<section>
						<h2>HTML5 이전의 애니메이션</h2>
						<br>
						<h3>setTimeout, setInterval</h3>
					</section>
					<section>
						<h3>느리다</h3>
						<p>setTimeout은 main Thread의 작업에 영향을 받는다.</p>
						<img src="image/settimeout.png"/>
					</section>
					<section>
						<h3>구현하기가 복잡하고, 어렵다</h3>
						<pre><code>
function animate(el, x, y, duration) {
	var startTime = Date.now();
	var now, per;
	(function loop() {
		now = Date.now();
		if (now >= startTime + duration) {
			// animation 종료 시점 (loop 종료 시점)
			el.style.transform = "translate3d(" + x + "px," + y + "px,0)";
			return;
		}
		per =  (now - startTime) / duration;
		// animation 진행. easing 처리
		el.style.transform = "translate3d(" + (x * per)  + "px," +  (y * per)  + "px,0)";
		// loop 재호출
		setTimeout(loop, 16);
	})();
}
</code></pre>
					</section>
				</section>
				<section>
					<section>
						<h2>HTML5 애니메이션 기술</h2>
						<table>
							<thead>
								<tr>
									<th>구분</th>
									<th>기술</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Javascript</td>
									<td>requestAnimationFrame</td>
								<tr>
								<tr>
									<td>CSS</td>
									<td>CSS Transition</td>
								<tr>
								<tr>
									<td>CSS</td>
									<td>CSS Animation</td>
								<tr>
								<tr>
									<td>SVG</td>
									<td>SVG Animation</td>
								<tr>
							</tbody>
						</table>
					</section>
					<section>
						<h3>빠르다</h3>
						<p><span class="semi-strong">requestAnimationFrame</span>는 setTimeout과 사용법은<p>
						<p>동일하지만 <span class="strong">60 fps</span>를 보장한다.</p>
						<img src="image/settimeout.png"/>
						<img src="image/rqa.png"/>
					</section>
					<section>
						<h3>빠르다</h3>
						<p>CSS 는 별도의 thread를 이용하기 때문에 빠르다.</p>
						<img src="image/mainthread.png"/>
						<img src="image/otherthread.png"/>
					</section>
					<section>
						<h3>간단하다</h3>
						<p>CSS Transition을 이용하면 간단히 구현할수 있다.</p>
<img src="image/transition.png" style="background-color:#fff;width:50%">
<div class="exampletransition">
	<div class="transition"></div>
</div>
						<pre><code>
.transition { transition: margin-left 1s linear, background-color 2s ease 1s; }
div.exampletransition:hover div.transition {
	margin-left: 700px;
	background-color: green;
}
</code></pre>
					</section>
					<section>
						<h3>제어할수 있다.</h3>
						<p>애니메이션 <span class="strong">중간 상태</span>를 지정할 수 있다.</p>
<div class="exampleanimation">
	<div class="ani"></div>
</div>
<pre><code data-trim>
@keyframes slidein {
  0% {
    margin-left:100%;
    width:300%;
  }
  75% {
    font-size:300%;
    margin-left:25%;
    width:150%;
  }
  100% {
    margin-left:0%;
    width:100%;
  }
}

.target {
	animation-delay : 0;
	animation-direction : normal; //normal, reverse, alternate, alternate-reverse
	animation-duration : 3s;
	animation-iteration-count : infinite;
	animation-name : slidein;
	animation-play-state :  running; // paused, running
	animation-timing-function : linear;
	animation-fill-mode : none; // none, forwards, backwards, both
}
</code></pre>
					</section>
					<section>
						<h3>제어할수 있다.</h3>
						<p>애니메이션 <span class="strong">진행상태</span>를 제어할수 있다.</p>
						<p> <span class="semi-strong">animation(start/end/iteration)</span> 이벤트를 제공</p>
<pre><code>
var e = document.getElementById("watchme");
// attach event
e.addEventListener("animationstart", listener, false);
e.addEventListener("animationend", listener, false);
e.addEventListener("animationiteration", listener, false);

// apply css animation
e.className = "slidein";

// event handler
function listener(e) {
  var l = document.createElement("li");
  switch(e.type) {
    case "animationstart":
      l.innerHTML = "Started: elapsed time is " + e.elapsedTime;
      break;
    case "animationend":
      l.innerHTML = "Ended: elapsed time is " + e.elapsedTime;
      break;
    case "animationiteration":
      l.innerHTML = "New loop started at time " + e.elapsedTime;
      break;
  }
  document.getElementById("output").appendChild(l);
}
</code></pre>
					</section>
					<section>
						<h3>하지만,</h3>
						<h3>HTML5 애니메이션 기술들을 </h3>
						<h3>효과적으로 쉽게  <span class="strong">제어</span>하기는 어렵다.</h3>
					</section>
				</section>
				<section>
					<h3>그래서 나왔다. 애니메이션의 종합판!</h3>
					<br>
					<h2 class="strong">Web Animation API</h2>
				</section>
				<section>
					<section>
						<h2>Web Animation API</h2>
						<p>통합된 애니메이션 제어 모델을 제공하기 위한 자바스크립트 API</p>
						<img src="image/CSS-SVG-Web-Animations.png" style="background-color: #fff"/>
					</section>
					<section>
						<h2>Web Animation API</h2><br>
						<p>기존 애니메이션 모델들에 동기화된 <span class="strong">공용 Javascript API</span> 제공</p>
						<p>기존 애니메이션 규격에서 처리하기 어려운 부분들을 보완</p>
					</section>
				</section>
				<section>
					<h2>Web Animation API 주요 기능</h2>
					<ol>
						<li>애니메이션의 <span class="semi-strong">재생방법의 제어</span></li>
						<li>애니메이션의 <span class="semi-strong">동시적</span> 수행의 조합</li>
						<li>애니메이션의 <span class="semi-strong">순차적</span> 수행의 조합</li>
						<li>SVG 패스를 이용한 애니메이션 구현</li>
					</ol>
				</section>
				<section>
					<h2>Animation Basic</h2>
					<p>Web Animation API Spec-1</p>
				</section>
				<section>
					<section>
						<h3>Element.animate()</h3>
						<blockquote>Animation = Element.animate(Keyframes, duration)</blockquote>
						<div class="playground">
						    <div id="code1" class="box"></div>
						</div>
						<pre style="width:80%;float:right;margin:0"><code contenteditable>
var player = document.getElementById("code1").animate([
	{ transform: 'scale(1)', opacity: 1},
	{ transform: 'scale(.5)', opacity: .5},
	{ transform: 'scale(.667)', opacity: .667},
	{ transform: 'scale(.6)', opacity: .6}
], 3000);
						</code></pre>
					</section>
					<section>
						<h3>Element.animate()</h3>
						<blockquote>Animation=Element.animate(Keyframes, <span class="semi-strong">AnimationEffectTiming</span>)</blockquote>
						<p><span class="semi-strong">offset</span>을 이용하여 animation의 중간 단계를 지정할수 있다.</p>
						<div class="playground">
						    <div id="code2" class="box"></div>
						</div>
						<pre style="width:80%;float:right;margin:0"><code contenteditable>
var player = document.getElementById("code2").animate([
	{ offset: 0, transform: 'scale(1)', opacity: 1 },
	{ offset: 0.3, transform: 'scale(.5)', opacity: 0.5 },
	{ offset: 0.7875, transform: 'scale(.667)', opacity: 0.667 },
	{ offset: 1, transform: 'scale(.6)', opacity: 0.6 }
], {
	duration: 700, //milliseconds
	easing: 'ease-in-out', //'linear', a bezier curve, etc.
	delay: 10, //milliseconds
	endDelay: 0, //milliseconds
    iterationStart : 0, //
	iterations: Infinity, //or a number
	direction: 'alternate', //'normal', 'reverse', 'alternate' etc.
	fill: 'forwards' // "forwards", 'backwards', 'both', 'none', 'auto'
});
						</code></pre>
					</section>
					<section>
						<h3>Animation 객체</h3>
	<small><a href="http://www.w3.org/TR/web-animations/#the-animation-interface">http://www.w3.org/TR/web-animations/#the-animation-interface</a></small>
						<pre><code>
interface Animation {
             attribute AnimationEffectReadOnly effect;
             attribute AnimationTimeline timeline;
             attribute double startTime;
             attribute double currentTime;
             attribute double playbackRate;
    readonly attribute AnimationPlayState playState;
    readonly attribute Promise Animation ready;
    readonly attribute Promise Animation finished;
    void cancel ();
    void finish ();
    void play ();
    void pause ();
    void reverse ();
};

enum AnimationPlayState { "idle", "pending", "running", "paused", "finished" };
	</code></pre>
					</section>
					<section>
						<h3>Animation 객체</h3>
						<p>Animation <span class="strong">동작상태</span>를 조절할수 있다.</p>
						<div class="playground">
						    <div id="code3" class="box" style="left:25px"></div>
						    <div style="height: 200px;float: left;width: 200px;margin-top: 170px;">
						    	<button class="play" onclick="player.play();">player.play()</button>
						    	<button class="pause" onclick="player.pause();">player.pause()</button>
						    	<button class="cancel" onclick="player.cancel();">player.cancel()</button>
						    	<button class="finish" onclick="player.finish();">player.finish()</button>
						    	<button class="finish" onclick="document.getElementById('code3').innerHTML = player.playState;">player.playState</button>
						    	<label style="font-size:0.5em">player.playbackRate</label><input id="pbr" type="range" min="0" max="10" step="0.1" value="1" onchange="document.getElementById('inval').innerHTML = player.playbackRate = document.getElementById('pbr').value; "><div id="inval" style="font-size:0.5em">1</div>

						    </div>
						</div>
						<pre style="width:75%;float:right;margin:0"><code contenteditable>
player = document.getElementById("code3").animate([
	{ offset: 0, transform: 'scale(1)', opacity: 1 },
	{ offset: 0.3, transform: 'scale(.5)', opacity: 0.5 },
	{ offset: 0.7875, transform: 'scale(.667)', opacity: 0.667 },
	{ offset: 1, transform: 'scale(.6)', opacity: 0.6 }
], {
	duration: 1000, //milliseconds
	easing: 'ease-in-out', //'linear', a bezier curve, etc.
	delay: 10, //milliseconds
	endDelay: 0, //milliseconds
    iterationStart : 0, //
	iterations: 1000, //or a number
	direction: 'alternate', //'normal', 'reverse', 'alternate' etc.
	fill: 'forwards' // "forwards", 'backwards', 'both', 'none', 'auto'
});</code></pre>
					</section>
					<section>
						<h3>Promise</h3>
						<small><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then">https://developer.mozilla.org</a></small>
						<p>Web Animation은 <span class="strong">ready</span>와 <span class="strong">finished</span> Promise를 지원한다.</p>
						<pre><code>Promise.prototype.then(onFulfilled, onRejected)</code></pre>
						<pre><code>promise.then(function(value) {
    // 성공인 경우
}, function(reason) {
    // 실패인 경우
});</code></pre>
					</section>
					<section>
						<h3>Promise</h3>
						<div class="playground">
						    <div id="code4" class="box" style="left:25px"></div>
						    <div style="height: 200px;float: left;width: 200px;margin-top: 170px;">
						    	<button class="cancel" onclick="player.cancel();">player.cancel()</button>
						    	<button class="finish" onclick="player.finish();">player.finish()</button>
						    	<div id="mcode4" class="message"></div>
						    </div>
						</div>
						<pre style="width:75%;float:right;margin:0"><code contenteditable>
player = document.getElementById("code4").animate([
	{ offset: 0, transform: 'scale(1)', opacity: 1 },
	{ offset: 0.3, transform: 'scale(.5)', opacity: 0.5 },
	{ offset: 0.7875, transform: 'scale(.667)', opacity: 0.667 },
	{ offset: 1, transform: 'scale(.6)', opacity: 0.6 }
], {
	duration: 1000, //milliseconds
	easing: 'ease-in-out', //'linear', a bezier curve, etc.
	delay: 10, //milliseconds
	endDelay: 0, //milliseconds
    iterationStart : 0, //
	iterations: 1000, //or a number
	direction: 'alternate', //'normal', 'reverse', 'alternate' etc.
	fill: 'forwards' // "forwards", 'backwards', 'both', 'none', 'auto'
});

var message = document.getElementById("mcode4");

// ready promise
player.ready.then(function(value) {
	message.innerHTML += "[성공] 애니메이션 시작" + "&lt;br&gt;";
}, function(reason) {
	message.innerHTML += "[실패] 애니메이션 시작" + "&lt;br&gt;";
});

// finished promise
player.finished.then(function(value) {
	message.innerHTML += "[성공] 애니메이션 종료" + "&lt;br&gt;";
}, function(reason) {
	message.innerHTML += "[실패] 애니메이션 종료" + "&lt;br&gt;";
});





var str=message.innerHTML;
</code></pre>
					</section>
				</section>
				<section>
						<h2>Multiple Animation</h2>
						<p>Web Animation API Spec-2</p>
				</section>
				<section>
					<section>
						<h3>Timeline 객체</h3>
						<small><a href="http://www.w3.org/TR/web-animations/#animationtimeline">http://www.w3.org/TR/web-animations/#animationtimeline</a></small>
						<pre><code>
interface AnimationTimeline {
    readonly attribute double currentTime;
    sequence Animation getAnimations();
};

[Constructor (DOMHighResTimeStamp originTime)]
interface DocumentTimeline : AnimationTimeline {
};
						</code></pre>
					</section>
					<section>
						<h3>Timeline 객체</h3>
						<p>다수 Animation 애니메이션을 제어</p>
<pre><code>
var players = document.timeline.getAnimations();
players.forEach(function(player, i, ra) {
      //player.pause();
      //player.play();
});</code></pre>
						<iframe height='268' scrolling='no' src='http://codepen.io/danwilson/embed/PqgKVK/?height=268&theme-id=0&default-tab=result' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='http://codepen.io/danwilson/pen/PqgKVK/'>Pause All those Random Dots!</a> by Dan Wilson (<a href='http://codepen.io/danwilson'>@danwilson</a>) on <a href='http://codepen.io'>CodePen</a></iframe>
					</section>
					<section>
						<h3>KeyframeEffects</h3>
						<p>Element.animation과 유사하나, 선언시 바로 실행되지 않는다.</p>
						<iframe style="background-color: #fff;height:300px;" src="example/basic.html"></iframe>
						<pre style="width:65%;float:right;margin:0"><code>
var effect = new KeyframeEffect(document.getElementById("box"),
  [
    { opacity: 1 },
    { opacity: 0 }
  ], {
    duration: 1000,
    fill: 'both'
  });
document.timeline.play(effect);
						</code></pre>
					</section>
					<section>
						<h3>GroupEffects</h3>
						<p>Group 단위로 애니메이션을 제어할수 있다.</p>
						<p>Keyframe/Group/SequenceEffect를 포함할 수 있다.</p>
						<iframe style="background-color: #fff;height:300px;" src="example/basic.html"></iframe>
						<pre style="width:65%;float:right;margin:0"><code>
var kEffects = [
	new KeyframeEffect(elem, keyframes, timings),
	new KeyframeEffect(elem2, keyframes, timings),
	new KeyframeEffect(elem2, keyframes, timings)
];
var group = new GroupEffect(kEffects);
document.timeline.play(group);
						</code></pre>
					</section>
					<section>
						<h3>SequenceEffect</h3>
						<p>순차적 애니메이션의 조합</p>
						<iframe style="background-color: #fff;height:300px;" src="example/basic.html"></iframe>
						<pre style="width:65%;float:right;margin:0"><code>
var kEffects = [
	new KeyframeEffect(elem, keyframes, timings),
	new KeyframeEffect(elem2, keyframes, timings),
	new KeyframeEffect(elem2, keyframes, timings)
];
var sequence = new SequenceEffect(kEffects);
document.timeline.play(sequence);
						</code></pre>
					</section>
					<section>
						<h3>GroupEffects과 SequenceEffect (Demo)</h3>
					</section>
				</section>
				<section>
					<h2>Motion Path</h2>
					<p>Motion path를 따라가는 animation</p>
					<iframe  src="http://codepen.io/danwilson/embed/MwLmby?height=145&amp;theme-id=0&amp;slug-hash=MwLmby&amp;default-tab=result&amp;user=danwilson" scrolling="no" frameborder="0" height="145" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe undefined" style="width: 100%; overflow: hidden;"></iframe>
				</section>
				<section>
					<section>
						<h3>motion-path</h3>
						<iframe style="background-color: #fff;height:300px;" src="example/basic.html"></iframe>
						<pre style="width:65%;float:right;margin:0"><code>
#motioner {
  motion-path: path("M200 200 S 200.5 200.1 348.7 184.4z");
}
						</code></pre>
					</section>
					<section>
						<h3>motion-offset</h3>
						<iframe style="background-color: #fff;height:300px;" src="example/basic.html"></iframe>
						<pre style="width:65%;float:right;margin:0"><code>
var m = document.getElementById('motioner');
m.animate([
  { motionOffset: 0 },
  { motionOffset: '100%' }
], 1000);
						</code></pre>
					</section>
				</section>
				<section>
					<h3>브라우저 지원 범위</h3>
					<img src="image/support.png">
					<small><a href="http://caniuse.com/#feat=web-animation">http://caniuse.com/#feat=web-animation</a></small>
					Enable Experimental Web Platform Feature
					실험용 웹 플랫폼 기능 사용
				</section>
				<section>
					<h3>web-animations-js polifil</h3>
					<p>https://github.com/web-animations/web-animations-js</p>
				</section>
				<section>
					<h2>Web Animation API의 미래</h2>
				</section>
				<section>
					<h2>감사합니다.</h2>
					<br>
					<h3>BY <a href="http://sculove.pe.kr">손찬욱</a> / <a href="https://www.facebook.com/chanuk.son">chanuk.son</a></h3>
				</section>
			</div>

		</div>

		<script src="../../revealjs/lib/js/head.min.js"></script>
		<script src="../../revealjs/js/reveal.min.js"></script>

		<script>
			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: '../../revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../../revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../../revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../../revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					// https://github.com/iamvdo/Reveal-liveCoding
					{ src: '../../revealjs/plugin/live-coding/live-coding.js', async: true, condition: function() { return !!document.body.classList; }},
					{ src: '../../revealjs/plugin/code-focus/code-focus.js', async: true, condition: function() { return !!document.body.classList; }},
					{ src: '../../revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: '../../revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>
		<script src="live-code/live-code.js"></script>
	</body>
</html>


